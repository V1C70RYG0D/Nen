# Devnet Scripts

Quick scripts to exercise the marketplace flows on Solana devnet without the UI.

## Setup
- Fund a keypair on devnet and save it as JSON (array form generated by solana-keygen).
- Create a `.env.local` (or export vars before running):
  - `NEXT_PUBLIC_SOLANA_RPC_URL=https://api.devnet.solana.com`
  - `NEXT_PUBLIC_NEN_MARKETPLACE_PROGRAM_ID=8FbcrTGS9wQCyC99h5jbHx2bzZjYfkGERSMCjmYBDisH`
  - `NEXT_PUBLIC_TREASURY_PUBLIC_KEY=<treasury pubkey>`

## Mint NFT
- File: `frontend/scripts/devnet-mint-agent.js`
- Purpose: Mint an AI Agent NFT with 5% royalty and model hash attribute; transfers 0.1 SOL mint fee to treasury first.

Env (examples):
- `PAYER_SECRET_KEY_JSON_PATH=~/.config/solana/devnet.json`
- `AGENT_NAME="Alpha Bot"`
- `MODEL_HASH=...`

## Create Listing
- File: `frontend/scripts/devnet-create-listing.js`
- Purpose: Create a fixed-price listing for an owned NFT. Transfers the NFT to program escrow ATA.

Env:
- `PAYER_SECRET_KEY_JSON_PATH=...`
- `NFT_MINT=<mint address>`
- `LIST_PRICE_SOL=0.5`
- `MARKETPLACE_FEE_BPS=250`
- `LISTING_TYPE=0` # 0=fixed, 1=auction (if supported)

## Buy Listing
- File: `frontend/scripts/devnet-buy-nft.js`
- Purpose: Buys the first active listing found and transfers the NFT to the buyer; pays seller minus fees and royalties.

Env:
- `PAYER_SECRET_KEY_JSON_PATH=...`  # buyer
- Optional: `TARGET_LISTING=<listing PDA>`
