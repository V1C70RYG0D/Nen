{
  "userStory": "2a - SOL Withdrawal Functionality",
  "timestamp": "2025-08-08T09:59:17.618Z",
  "summary": {
    "totalTests": 21,
    "passed": 19,
    "failed": 1,
    "skipped": 1,
    "successRate": 90.5,
    "executionTimeMs": 1220
  },
  "acceptanceCriteria": {
    "User enters withdrawal amount in SOL": true,
    "User approves transaction in wallet": true,
    "User sees updated balance": true,
    "Enforce 24-hour cooldown for security": true,
    "Show error if locked funds exceed amount": true
  },
  "onChainRequirements": {
    "Validate against locked funds on devnet PDA": true,
    "Transfer real SOL from PDA to wallet": true,
    "Enforce cooldown using devnet timestamps": true,
    "Emit withdrawal event": true,
    "Update real balance records on devnet": true
  },
  "detailedResults": [
    {
      "test": "Minimum Withdrawal Validation",
      "passed": true,
      "message": "Correctly rejects withdrawal below 0.01 SOL",
      "timestamp": "2025-08-08T09:59:16.397Z",
      "details": {
        "testedAmount": 0.005,
        "minimum": 0.01
      }
    },
    {
      "test": "Invalid Amount Validation",
      "passed": true,
      "message": "Correctly validates 3/3 invalid amounts",
      "timestamp": "2025-08-08T09:59:16.400Z",
      "details": {
        "testedAmounts": [
          0,
          -1,
          -0.5
        ]
      }
    },
    {
      "test": "PDA Generation",
      "passed": true,
      "message": "PDA generation works correctly",
      "timestamp": "2025-08-08T09:59:16.546Z",
      "details": {
        "pda": "HNdoip2Qw16k6RHdsrRCQcx2fHhSzrumNCr3GEkcBopM",
        "bump": 255
      }
    },
    {
      "test": "Cooldown Test: Recent Withdrawal (12h ago)",
      "passed": true,
      "message": "Blocks withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.548Z",
      "details": {
        "lastWithdrawal": "2025-08-07T21:59:16.548Z",
        "cooldownRemaining": 12,
        "expected": false,
        "actual": false
      }
    },
    {
      "test": "Cooldown Test: Old Withdrawal (25h ago)",
      "passed": true,
      "message": "Allows withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.549Z",
      "details": {
        "lastWithdrawal": "2025-08-07T08:59:16.548Z",
        "cooldownRemaining": 0,
        "expected": true,
        "actual": true
      }
    },
    {
      "test": "Cooldown Test: No Previous Withdrawal",
      "passed": true,
      "message": "Allows withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.550Z",
      "details": {
        "lastWithdrawal": "1970-01-01T00:00:00.000Z",
        "cooldownRemaining": 0,
        "expected": true,
        "actual": true
      }
    },
    {
      "test": "Cooldown Test: Recent Withdrawal (1h ago)",
      "passed": true,
      "message": "Blocks withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.551Z",
      "details": {
        "lastWithdrawal": "2025-08-08T08:59:16.548Z",
        "cooldownRemaining": 23,
        "expected": false,
        "actual": false
      }
    },
    {
      "test": "Locked Funds Test: No Locked Funds",
      "passed": true,
      "message": "Allows withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.552Z",
      "details": {
        "balance": 5,
        "locked": 0,
        "available": 5,
        "withdrawAmount": 2,
        "expected": true,
        "actual": true
      }
    },
    {
      "test": "Locked Funds Test: Partial Locked Funds",
      "passed": true,
      "message": "Allows withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.553Z",
      "details": {
        "balance": 10,
        "locked": 3,
        "available": 7,
        "withdrawAmount": 5,
        "expected": true,
        "actual": true
      }
    },
    {
      "test": "Locked Funds Test: Excessive Withdrawal",
      "passed": true,
      "message": "Blocks withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.554Z",
      "details": {
        "balance": 5,
        "locked": 2,
        "available": 3,
        "withdrawAmount": 4,
        "expected": false,
        "actual": false
      }
    },
    {
      "test": "Locked Funds Test: All Funds Locked",
      "passed": true,
      "message": "Blocks withdrawal correctly",
      "timestamp": "2025-08-08T09:59:16.555Z",
      "details": {
        "balance": 5,
        "locked": 5,
        "available": 0,
        "withdrawAmount": 1,
        "expected": false,
        "actual": false
      }
    },
    {
      "test": "PDA Ownership Isolation",
      "passed": true,
      "message": "Different users have different PDAs",
      "timestamp": "2025-08-08T09:59:16.560Z",
      "details": {
        "user1PDA": "A5G3Ud6jTUnfcVKTuqnXx6A1YK9dwCUdBxGpzM7XWdX4",
        "user2PDA": "GWLoHVHDN75QXSvEyo4B3fKUcYX3sTMhYqiP4J1ZWzQ"
      }
    },
    {
      "test": "Minimum Withdrawal Security",
      "passed": true,
      "message": "Blocks 3/3 amounts below minimum",
      "timestamp": "2025-08-08T09:59:16.561Z",
      "details": {
        "minWithdrawal": 0.01,
        "testedAmounts": [
          0.005,
          0.001,
          0
        ]
      }
    },
    {
      "test": "PDA Generation Performance",
      "passed": true,
      "message": "Generated 100 PDAs in 183ms",
      "timestamp": "2025-08-08T09:59:16.745Z",
      "details": {
        "operations": 100,
        "timeMs": 183,
        "avgTimeMs": 1.83
      }
    },
    {
      "test": "Connection Performance",
      "passed": true,
      "message": "Devnet connection in 515ms",
      "timestamp": "2025-08-08T09:59:17.261Z",
      "details": {
        "timeMs": 515
      }
    },
    {
      "test": "Transaction Structure",
      "passed": true,
      "message": "Transaction contains correct number of instructions",
      "timestamp": "2025-08-08T09:59:17.264Z",
      "details": {
        "instructionCount": 1,
        "fromPubkey": "CUDzKR49j6HqSAvJVDo21faiNV5C6QEtQqhJCJEeFM2w",
        "toPubkey": "5DnxfVHA3WFmFniZzTX5ejcu8bBnTGqQzWhpg82Xt5Yg",
        "lamports": 1000000000
      }
    },
    {
      "test": "Instruction Validation",
      "passed": true,
      "message": "Withdrawal instruction structure is correct",
      "timestamp": "2025-08-08T09:59:17.265Z",
      "details": {
        "programId": "11111111111111111111111111111111",
        "keyCount": 2
      }
    },
    {
      "test": "Devnet Connection",
      "passed": "2.3.6",
      "message": "Successfully connected to Solana devnet",
      "timestamp": "2025-08-08T09:59:17.385Z",
      "details": {
        "solanaVersion": "2.3.6"
      }
    },
    {
      "test": "Program Account Verification",
      "passed": false,
      "message": "Betting program not found on devnet",
      "timestamp": "2025-08-08T09:59:17.500Z",
      "details": {
        "programId": "34RNydfkFZmhvUupbW1qHBG5LmASc6zeS3tuUsw6PwC5"
      }
    },
    {
      "test": "Blockhash Retrieval",
      "passed": true,
      "message": "Can retrieve recent blockhash for transactions",
      "timestamp": "2025-08-08T09:59:17.614Z",
      "details": {
        "blockhash": "3iJTHnGMm7zAUR9AYKAEHjhiViVy5T4tT9XfuTQetWpp"
      }
    },
    {
      "test": "Real Transaction Test",
      "skipped": true,
      "reason": "Disabled for safety - requires real SOL",
      "timestamp": "2025-08-08T09:59:17.615Z"
    }
  ]
}